"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PORT = exports.MOCHA_TIMEOUT = exports.HOST = void 0;
exports.deleteSession = deleteSession;
exports.getServer = getServer;
exports.initDriver = initDriver;
exports.initSession = initSession;

require("source-map-support/register");

var _wd = _interopRequireDefault(require("wd"));

var _2 = require("../../..");

var _appiumSupport = require("appium-support");

var _lodash = _interopRequireDefault(require("lodash"));

var _axios = _interopRequireDefault(require("axios"));

const {
  SAUCE_RDC,
  SAUCE_EMUSIM,
  CLOUD
} = process.env;

function getPort() {
  if (SAUCE_EMUSIM || SAUCE_RDC) {
    return 80;
  }

  return 4994;
}

function getHost() {
  if (SAUCE_RDC) {
    return 'appium.staging.testobject.org';
  } else if (SAUCE_EMUSIM) {
    return 'ondemand.saucelabs.com';
  }

  return process.env.REAL_DEVICE ? _appiumSupport.util.localIp() : 'localhost';
}

const HOST = getHost();
exports.HOST = HOST;
const PORT = getPort();
exports.PORT = PORT;
const MOCHA_TIMEOUT = 60 * 1000 * (process.env.CI ? 0 : 4);
exports.MOCHA_TIMEOUT = MOCHA_TIMEOUT;
const WDA_PORT = 8200;
let driver, server;

if (CLOUD) {
  before(function () {
    process.env.SAUCE_JOB_NAME = `${process.env.TRAVIS_JOB_NUMBER || 'Suite'}: ${this.test.parent.suites[0].title}`;
  });
  afterEach(function () {
    if (driver) {
      let fullTitle;

      if (!driver.name) {
        let titles = [];
        const currentTest = this.currentTest;
        titles.push(currentTest.title);
        let parent = currentTest.parent;

        while (parent) {
          if (parent.title) {
            titles.push(parent.title);
          }

          parent = parent.parent;
        }

        fullTitle = titles.reverse().join('/');
        driver.name = `${process.env.TRAVIS_JOB_NUMBER || 'Suite'}: ${_lodash.default.first(titles)}`;
      }

      if (!driver.errored && this.currentTest.state !== 'passed') {
        driver.name += ` (${fullTitle})`;
        driver.errored = true;
      }
    }

    if (this.currentTest.err) {
      console.error('ERROR:', JSON.stringify(this.currentTest.err, null, 2));
    }
  });
}

async function initDriver() {
  const config = {
    host: HOST,
    port: PORT
  };
  driver = CLOUD ? await _wd.default.promiseChainRemote(config, process.env.SAUCE_USERNAME, process.env.SAUCE_ACCESS_KEY) : await _wd.default.promiseChainRemote(config);
  driver.name = undefined;
  driver.errored = false;
  return driver;
}

async function initServer() {
  server = await (0, _2.startServer)(PORT, HOST);
}

function getServer() {
  return server;
}

async function initWDA(caps) {
  try {
    await (0, _axios.default)({
      url: `http://${HOST}:${WDA_PORT}/status`,
      timeout: 5000
    });
  } catch (err) {
    const desiredCaps = Object.assign({
      autoLaunch: false,
      wdaLocalPort: WDA_PORT
    }, caps);
    await driver.init(desiredCaps);
    await driver.quit();
  }
}

async function initSession(caps) {
  if (!CLOUD) {
    await initServer();
  }

  if (CLOUD) {
    if (!caps.name) {
      caps.name = process.env.SAUCE_JOB_NAME || process.env.TRAVIS_JOB_NUMBER || 'unnamed';
    }
  }

  await initDriver();

  if (process.env.USE_WEBDRIVERAGENTURL) {
    await initWDA(caps);
    caps = Object.assign({
      webDriverAgentUrl: `http://${HOST}:${WDA_PORT}`,
      wdaLocalPort: WDA_PORT
    }, caps);
  }

  const serverRes = await driver.init(caps);

  if (!caps.udid && !caps.fullReset && serverRes[1].udid) {
    caps.udid = serverRes[1].udid;
  }

  return driver;
}

async function deleteSession() {
  try {
    if (CLOUD) {
      await driver.sauceJobUpdate({
        name: driver.name,
        passed: !driver.errored
      });
    }
  } catch (ign) {}

  try {
    await driver.quit();
  } catch (ign) {} finally {
    driver = undefined;
  }

  try {
    await server.close();
  } catch (ign) {}
}require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC9mdW5jdGlvbmFsL2hlbHBlcnMvc2Vzc2lvbi5qcyIsIm5hbWVzIjpbIlNBVUNFX1JEQyIsIlNBVUNFX0VNVVNJTSIsIkNMT1VEIiwicHJvY2VzcyIsImVudiIsImdldFBvcnQiLCJnZXRIb3N0IiwiUkVBTF9ERVZJQ0UiLCJ1dGlsIiwibG9jYWxJcCIsIkhPU1QiLCJQT1JUIiwiTU9DSEFfVElNRU9VVCIsIkNJIiwiV0RBX1BPUlQiLCJkcml2ZXIiLCJzZXJ2ZXIiLCJiZWZvcmUiLCJTQVVDRV9KT0JfTkFNRSIsIlRSQVZJU19KT0JfTlVNQkVSIiwidGVzdCIsInBhcmVudCIsInN1aXRlcyIsInRpdGxlIiwiYWZ0ZXJFYWNoIiwiZnVsbFRpdGxlIiwibmFtZSIsInRpdGxlcyIsImN1cnJlbnRUZXN0IiwicHVzaCIsInJldmVyc2UiLCJqb2luIiwiXyIsImZpcnN0IiwiZXJyb3JlZCIsInN0YXRlIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsImluaXREcml2ZXIiLCJjb25maWciLCJob3N0IiwicG9ydCIsIndkIiwicHJvbWlzZUNoYWluUmVtb3RlIiwiU0FVQ0VfVVNFUk5BTUUiLCJTQVVDRV9BQ0NFU1NfS0VZIiwidW5kZWZpbmVkIiwiaW5pdFNlcnZlciIsInN0YXJ0U2VydmVyIiwiZ2V0U2VydmVyIiwiaW5pdFdEQSIsImNhcHMiLCJheGlvcyIsInVybCIsInRpbWVvdXQiLCJkZXNpcmVkQ2FwcyIsIk9iamVjdCIsImFzc2lnbiIsImF1dG9MYXVuY2giLCJ3ZGFMb2NhbFBvcnQiLCJpbml0IiwicXVpdCIsImluaXRTZXNzaW9uIiwiVVNFX1dFQkRSSVZFUkFHRU5UVVJMIiwid2ViRHJpdmVyQWdlbnRVcmwiLCJzZXJ2ZXJSZXMiLCJ1ZGlkIiwiZnVsbFJlc2V0IiwiZGVsZXRlU2Vzc2lvbiIsInNhdWNlSm9iVXBkYXRlIiwicGFzc2VkIiwiaWduIiwiY2xvc2UiXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uIiwic291cmNlcyI6WyJ0ZXN0L2Z1bmN0aW9uYWwvaGVscGVycy9zZXNzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB3ZCBmcm9tICd3ZCc7XG5pbXBvcnQgeyBzdGFydFNlcnZlciB9IGZyb20gJy4uLy4uLy4uJztcbmltcG9ydCB7IHV0aWwgfSBmcm9tICdhcHBpdW0tc3VwcG9ydCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcblxuXG5jb25zdCB7U0FVQ0VfUkRDLCBTQVVDRV9FTVVTSU0sIENMT1VEfSA9IHByb2Nlc3MuZW52O1xuXG5mdW5jdGlvbiBnZXRQb3J0ICgpIHtcbiAgaWYgKFNBVUNFX0VNVVNJTSB8fCBTQVVDRV9SREMpIHtcbiAgICByZXR1cm4gODA7XG4gIH1cbiAgcmV0dXJuIDQ5OTQ7XG59XG5cbmZ1bmN0aW9uIGdldEhvc3QgKCkge1xuICBpZiAoU0FVQ0VfUkRDKSB7XG4gICAgcmV0dXJuICdhcHBpdW0uc3RhZ2luZy50ZXN0b2JqZWN0Lm9yZyc7XG4gIH0gZWxzZSBpZiAoU0FVQ0VfRU1VU0lNKSB7XG4gICAgcmV0dXJuICdvbmRlbWFuZC5zYXVjZWxhYnMuY29tJztcbiAgfVxuXG4gIHJldHVybiBwcm9jZXNzLmVudi5SRUFMX0RFVklDRSA/IHV0aWwubG9jYWxJcCgpIDogJ2xvY2FsaG9zdCc7XG59XG5cbmNvbnN0IEhPU1QgPSBnZXRIb3N0KCk7XG5jb25zdCBQT1JUID0gZ2V0UG9ydCgpO1xuLy8gb24gQ0kgdGhlIHRpbWVvdXQgbmVlZHMgdG8gYmUgbG9uZywgbW9zdGx5IHNvIFdEQSBjYW4gYmUgYnVpbHQgdGhlIGZpcnN0IHRpbWVcbmNvbnN0IE1PQ0hBX1RJTUVPVVQgPSA2MCAqIDEwMDAgKiAocHJvY2Vzcy5lbnYuQ0kgPyAwIDogNCk7XG5jb25zdCBXREFfUE9SVCA9IDgyMDA7XG5cbmxldCBkcml2ZXIsIHNlcnZlcjtcblxuaWYgKENMT1VEKSB7XG4gIGJlZm9yZShmdW5jdGlvbiAoKSB7XG4gICAgcHJvY2Vzcy5lbnYuU0FVQ0VfSk9CX05BTUUgPSBgJHtwcm9jZXNzLmVudi5UUkFWSVNfSk9CX05VTUJFUiB8fCAnU3VpdGUnfTogJHt0aGlzLnRlc3QucGFyZW50LnN1aXRlc1swXS50aXRsZX1gO1xuICB9KTtcblxuICAvLyBvbiBTYXVjZSBMYWJzIHdlIG5lZWQgdG8gdHJhY2sgdGhlIHN0YXR1cyBvZiB0aGUgam9iXG4gIGFmdGVyRWFjaChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGRyaXZlcikge1xuICAgICAgbGV0IGZ1bGxUaXRsZTtcbiAgICAgIGlmICghZHJpdmVyLm5hbWUpIHtcbiAgICAgICAgLy8gdHJhdmVyc2UgdGhlIHRpdGxlIHRyZWUgdG8gZ2V0IHRoZSB3aG9sZSB0aGluZ1xuICAgICAgICBsZXQgdGl0bGVzID0gW107XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUZXN0ID0gdGhpcy5jdXJyZW50VGVzdDtcbiAgICAgICAgdGl0bGVzLnB1c2goY3VycmVudFRlc3QudGl0bGUpO1xuICAgICAgICBsZXQgcGFyZW50ID0gY3VycmVudFRlc3QucGFyZW50O1xuICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgaWYgKHBhcmVudC50aXRsZSkge1xuICAgICAgICAgICAgdGl0bGVzLnB1c2gocGFyZW50LnRpdGxlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBmdWxsVGl0bGUgPSB0aXRsZXMucmV2ZXJzZSgpLmpvaW4oJy8nKTtcblxuICAgICAgICAvLyBjb25zdHJ1Y3QgdGhlIG5hbWUgZm9yIHRoZSBqb2JcbiAgICAgICAgZHJpdmVyLm5hbWUgPSBgJHtwcm9jZXNzLmVudi5UUkFWSVNfSk9CX05VTUJFUiB8fCAnU3VpdGUnfTogJHtfLmZpcnN0KHRpdGxlcyl9YDtcbiAgICAgIH1cblxuICAgICAgLy8gY2hlY2sgZm9yIHRoZSBmaXJzdCBmYWlsdXJlXG4gICAgICBpZiAoIWRyaXZlci5lcnJvcmVkICYmIHRoaXMuY3VycmVudFRlc3Quc3RhdGUgIT09ICdwYXNzZWQnKSB7XG4gICAgICAgIC8vIGFkZCB0aGUgZmlyc3QgZmFpbGVkIGpvYiB0aXRsZSB0byB0aGUgbmFtZSBvZiB0aGUgam9iXG4gICAgICAgIGRyaXZlci5uYW1lICs9IGAgKCR7ZnVsbFRpdGxlfSlgO1xuICAgICAgICAvLyBhbmQgZmFpbCB0aGUgd2hvbGUgam9iXG4gICAgICAgIGRyaXZlci5lcnJvcmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB3ZCBwdXRzIGluZm8gaW50byB0aGUgZXJyb3Igb2JqZWN0IHRoYXQgbW9jaGEgY2FuJ3QgZGlzcGxheSBlYXNpbHlcbiAgICBpZiAodGhpcy5jdXJyZW50VGVzdC5lcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VSUk9SOicsIEpTT04uc3RyaW5naWZ5KHRoaXMuY3VycmVudFRlc3QuZXJyLCBudWxsLCAyKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICB9XG4gIH0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0RHJpdmVyICgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSByZXF1aXJlLWF3YWl0XG4gIGNvbnN0IGNvbmZpZyA9IHtob3N0OiBIT1NULCBwb3J0OiBQT1JUfTtcbiAgZHJpdmVyID0gQ0xPVURcbiAgICA/IGF3YWl0IHdkLnByb21pc2VDaGFpblJlbW90ZShjb25maWcsIHByb2Nlc3MuZW52LlNBVUNFX1VTRVJOQU1FLCBwcm9jZXNzLmVudi5TQVVDRV9BQ0NFU1NfS0VZKVxuICAgIDogYXdhaXQgd2QucHJvbWlzZUNoYWluUmVtb3RlKGNvbmZpZyk7XG4gIGRyaXZlci5uYW1lID0gdW5kZWZpbmVkO1xuICBkcml2ZXIuZXJyb3JlZCA9IGZhbHNlO1xuICByZXR1cm4gZHJpdmVyO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0U2VydmVyICgpIHtcbiAgc2VydmVyID0gYXdhaXQgc3RhcnRTZXJ2ZXIoUE9SVCwgSE9TVCk7XG59XG5cbmZ1bmN0aW9uIGdldFNlcnZlciAoKSB7XG4gIHJldHVybiBzZXJ2ZXI7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXRXREEgKGNhcHMpIHtcbiAgLy8gZmlyc3QsIHNlZSBpZiB0aGlzIGlzIG5lY2Vzc2FyeVxuICB0cnkge1xuICAgIGF3YWl0IGF4aW9zKHt1cmw6IGBodHRwOi8vJHtIT1NUfToke1dEQV9QT1JUfS9zdGF0dXNgLCB0aW1lb3V0OiA1MDAwfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIC8vIGVhc2llc3Qgd2F5IHRvIGluaXRpYWxpemUgV0RBIGlzIHRvIGdvIHRocm91Z2ggYSB0ZXN0IHN0YXJ0dXBcbiAgICAvLyBvdGhlcndpc2UgZXZlcnkgY2hhbmdlIHRvIHRoZSBzeXN0ZW0gd291bGQgcmVxdWlyZSBhIGNoYW5nZSBoZXJlXG4gICAgY29uc3QgZGVzaXJlZENhcHMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgIGF1dG9MYXVuY2g6IGZhbHNlLFxuICAgICAgd2RhTG9jYWxQb3J0OiBXREFfUE9SVCxcbiAgICB9LCBjYXBzKTtcbiAgICBhd2FpdCBkcml2ZXIuaW5pdChkZXNpcmVkQ2Fwcyk7XG4gICAgYXdhaXQgZHJpdmVyLnF1aXQoKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0U2Vzc2lvbiAoY2Fwcykge1xuICBpZiAoIUNMT1VEKSB7XG4gICAgYXdhaXQgaW5pdFNlcnZlcigpO1xuICB9XG5cbiAgaWYgKENMT1VEKSB7XG4gICAgLy8gb24gY2xvdWQgdGVzdHMsIHdlIHdhbnQgdG8gc2V0IHRoZSBgbmFtZWAgY2FwYWJpbGl0eVxuICAgIGlmICghY2Fwcy5uYW1lKSB7XG4gICAgICBjYXBzLm5hbWUgPSBwcm9jZXNzLmVudi5TQVVDRV9KT0JfTkFNRSB8fCBwcm9jZXNzLmVudi5UUkFWSVNfSk9CX05VTUJFUiB8fCAndW5uYW1lZCc7XG4gICAgfVxuICB9XG5cbiAgYXdhaXQgaW5pdERyaXZlcigpO1xuXG4gIGlmIChwcm9jZXNzLmVudi5VU0VfV0VCRFJJVkVSQUdFTlRVUkwpIHtcbiAgICBhd2FpdCBpbml0V0RBKGNhcHMpO1xuICAgIGNhcHMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgIHdlYkRyaXZlckFnZW50VXJsOiBgaHR0cDovLyR7SE9TVH06JHtXREFfUE9SVH1gLFxuICAgICAgd2RhTG9jYWxQb3J0OiBXREFfUE9SVCxcbiAgICB9LCBjYXBzKTtcbiAgfVxuXG4gIGNvbnN0IHNlcnZlclJlcyA9IGF3YWl0IGRyaXZlci5pbml0KGNhcHMpO1xuICBpZiAoIWNhcHMudWRpZCAmJiAhY2Fwcy5mdWxsUmVzZXQgJiYgc2VydmVyUmVzWzFdLnVkaWQpIHtcbiAgICBjYXBzLnVkaWQgPSBzZXJ2ZXJSZXNbMV0udWRpZDtcbiAgfVxuXG4gIHJldHVybiBkcml2ZXI7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNlc3Npb24gKCkge1xuICB0cnkge1xuICAgIGlmIChDTE9VRCkge1xuICAgICAgYXdhaXQgZHJpdmVyLnNhdWNlSm9iVXBkYXRlKHtcbiAgICAgICAgbmFtZTogZHJpdmVyLm5hbWUsXG4gICAgICAgIHBhc3NlZDogIWRyaXZlci5lcnJvcmVkLFxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChpZ24pIHt9XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCBkcml2ZXIucXVpdCgpO1xuICB9IGNhdGNoIChpZ24pIHtcbiAgfSBmaW5hbGx5IHtcbiAgICBkcml2ZXIgPSB1bmRlZmluZWQ7XG4gIH1cblxuICB0cnkge1xuICAgIGF3YWl0IHNlcnZlci5jbG9zZSgpO1xuICB9IGNhdGNoIChpZ24pIHt9XG59XG5cbmV4cG9ydCB7IGluaXREcml2ZXIsIGluaXRTZXNzaW9uLCBkZWxldGVTZXNzaW9uLCBnZXRTZXJ2ZXIsIEhPU1QsIFBPUlQsIE1PQ0hBX1RJTUVPVVQgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0EsTUFBTTtFQUFDQSxTQUFEO0VBQVlD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
